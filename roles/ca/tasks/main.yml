---
- name: ‚öôÔ∏è Deploy Cluster Autoscaler
  kubernetes.core.helm:
    name: cluster-autoscaler
    chart_ref: autoscaler/cluster-autoscaler
    release_namespace: kube-system
    create_namespace: false
    values_files:
      - "{{ playbook_dir }}/files/values-cluster-autoscaler.yaml"
  tags: ['ca']

- name: üß© Apply ServiceMonitor for Cluster Autoscaler
  kubernetes.core.k8s:
    state: present
    definition: "{{ lookup('file', 'files/manifests/servicemonitor-cluster-autoscaler.yaml') }}"
  tags: ['ca']
